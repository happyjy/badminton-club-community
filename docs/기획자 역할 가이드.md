# 기획자 역할 가이드 (Badminton Club Communication Platform)

이 문서는 본 프로젝트에서 기획자(Product Planner/PM)의 역할, 산출물, 협업 절차, 품질 기준을 정의합니다. 현재 저장소 구조와 진행 중인 기능(게스트 신청/승인, 댓글 알림, SMS 알림, 회원/일정 관리)을 기준으로 작성되었습니다.

## 1) 역할과 책임 범위

- 문제 정의와 목표 정렬: 사용자 문제/비즈니스 목표를 명확히 정의하고 우선순위를 설정.
- 요구사항 관리: 기능/정책/NFR(성능·보안·접근성) 요구사항 수집·정제·버전관리.
- 사용자 여정/플로우 설계: 핵심 플로우(가입, 일정 참여, 게스트 신청·승인, 댓글 알림, SMS 수신)를 시퀀스로 문서화.
- 데이터/정책 정의: 도메인 용어, 상태값, 예외 케이스, 제한 조건, 보관/파기 정책 명시.
- 스펙 문서화와 계약(Contract) 확정: API/컴포넌트 스펙을 개발과 합의, 변경 관리.
- 품질 보증 관점의 수용 기준 정의: 수용 기준(AC), 테스트 시나리오, 가장자리/에러 케이스 설계.
- 출시 계획/운영: 릴리스 범위, 플래그 전략, 롤백/런북, 공지/가이드 정리.

## 2) 산출물 리스트(위치/형식)

- PRD: `ProductRequirementDoc/` 내 기능별 폴더 또는 파일. 예) 문자/이메일, 커스텀 설정, 관리자화면 등.
- 진행 메모/가이드: `docs/` 폴더. 예) `docs/환경변수 설정 가이드.md`, `docs/00. Prisma 스키마 작업 주의사항.md`.
- 사용자 플로우 다이어그램: `docs/flows/` 하위(신규 생성 가능), PNG/SVG 또는 링크(Figma 등).
- 정책 표/상태도: 마크다운 표로 `docs/` 또는 해당 PRD에 포함.
- QA 수용 기준/시나리오: PRD 말미에 “수용 기준” 섹션으로 포함.

권장 파일 네이밍: `YYMMDD. [도메인/기능] - prd.md`, 하위에 `prompt.md`, `spec.md` 등 보조 문서 추가 가능.

## 3) 작업 흐름(아이디어 → 출시)

1. 문제/목표 합의: 배경, 목표지표, 제약 정리 → 이슈/PRD 초안 업로드.
2. 요구사항 정제: 유저 스토리/정책/NFR 수집 → 상태/예외 정의.
3. 스펙 설계: 화면/플로우/Wireframe, 데이터 모델 영향도, API 계약 초안 작성.
4. 합의/락인: 개발/디자인/운영과 리뷰 후 버전 태깅(v1.0 등).
5. 구현 지원: QA 기준 제공, 더미 데이터/케이스 제공, API 변경 관리.
6. 검증: 수용 기준 기반 리그레션/에지 케이스 검증, 로그·모니터링 항목 확인.
7. 출시/운영: 변경 로그, 공지, 플래그/릴리스 계획, 모니터링 지표 점검.

## 4) 요구사항 정의 가이드(프로젝트 맥락)

- 게스트 신청/승인
  - 상태값: `PENDING` → `APPROVED` | `REJECTED` | `CANCELED` 정의 및 전이 조건.
  - 권한: 신청자, 게시글 작성자, 관리자 권한 별 가능 액션.
  - 제한: 일일 신청 횟수, 중복 신청 방지, 신청 마감시각 정책.

- 댓글 알림
  - 트리거: “다른 사용자 댓글 작성” 시 1회 알림. 동일 스레드 중복 방지 룰 정의.
  - 제외: 본인 댓글, 차단 사용자, 조용 시간(야간) 정책 등.

- SMS 알림(신규 구현 영역 반영)
  - 트리거: 상태 변경, 댓글 발생. “유형별 최초 1회” 전송 규칙.
  - 이력: 전송 성공/실패, 메시지ID, 수신자, 유형 저장. 재시도/중복 방지 키.
  - 컴플라이언스: 조용 시간, 수신 동의/철회, 클럽별 발신 가능 여부.
  - 레퍼런스: README “SMS 알림 동작 방식”, `docs/문자 전송/`, `ProductRequirementDoc/문자, 이메일 전송 기능/`.

- 회원 랭킹/일정 참여
  - 랭킹 산식, 반영 주기, 초기값/결측 처리. 일정 참여/취소 정책 및 패널티.

## 5) 데이터/스키마/정책 협업

- Prisma 스키마 영향도는 변경 전 이슈로 공유하고, 아래 문서를 기준으로 합의:
  - `docs/00. Prisma 스키마 작업 주의사항.md`
  - 주요 모델/필드, enum, 인덱스, 마이그레이션 시 운영 데이터 영향도 명시.
- 개인정보(전화번호 등) 처리
  - 저장 위치/형식, 마스킹/암호화, 보관 기간, 파기/정정/이관 절차.

## 6) API 계약(Contract) 정의 원칙

- 문서 위치: 각 PRD에 “API 계약” 섹션 작성. 경로는 Next.js API Routes 기준.
- 내용: 메서드/경로, 요청·응답 스키마(JSON 예시), 상태코드, 에러코드, 비동기 이벤트(SMS 등) 후속 처리.
- 버전/호환: 필드 추가는 호환 추가 원칙, 필드 제거/의미변경은 마이그레이션 계획 포함.

## 7) 품질 기준

- Definition of Ready(개발 착수 조건)
  - 목표·범위 합의, 플로우/와이어프레임, 상태/정책/예외, API 계약 초안, 데이터 영향도, 수용 기준.
- Definition of Done(완료 조건)
  - 수용 기준 충족, NFR(성능·보안·A11y) 체크, 로그/모니터링/알림 설정, 문서·가이드 업데이트, 롤백 계획.
- NFR 체크리스트(예시)
  - 성능: 목록/상세 응답시간, SMS 전송 지연 허용 범위.
  - 보안/개인정보: 인증/인가, PII 최소수집, 전화번호 마스킹, 감사로그.
  - 접근성: 키보드 내비게이션, 대비, 폼 에러 안내.

## 8) 일정/커뮤니케이션 리듬

- 주간: 목표/우선순위 확정, 위험/의존성 점검, 차주 릴리스 범위.
- 중간 점검: 스펙 변경/추가 시 영향도 브리핑, 계약 업데이트.
- 리뷰: 데모 기반 수용 테스트, 회고/배운점 기록.

## 9) 문서 구조 가이드

- 기능 단위 문서: `ProductRequirementDoc/` 하위에 폴더 만들고 `.. - prd.md`로 본문 작성.
- 기술 가이드/운영: `docs/` 하위에 가이드 축적(예: `환경변수 설정 가이드.md`, `Supabase 커넥션 풀 설정 가이드.md`).
- 링크/참조: 코드파일 경로, 관련 이슈/PR, 외부 도구(Figma, ERD) 링크를 문서 상단 메타에 정리.

## 10) 예시 템플릿(복사해 사용)

```
# [기능명] - PRD v1.0

## 배경/문제
- 

## 목표/지표
- 주간 활성 회원 %, 게스트 신청 전환율, SMS 성공률 등

## 사용자/시나리오
- [역할/페르소나]로서, [목표]를 위해 [행동]하고 싶다.

## 플로우
- (순서도, 상태 전이 다이어그램 링크 또는 설명)

## 요구사항(기능/정책)
- 

## 예외/제한
- 조용 시간, 중복 전송 방지, 최대 길이 등

## 데이터/스키마 영향
- Prisma 모델 변경, 마이그레이션 요건, 인덱스 등

## API 계약(초안)
- [METHOD] /api/... 
- Request: {}
- Response: {}
- 오류 코드/메시지

## 수용 기준(AC)
- [AC-1] 
- [AC-2] 

## 로그/모니터링
- 이벤트/필드, 대시보드/알림 항목

## 릴리스/운영
- 플래그, 롤백, 공지/가이드

## 참고/링크
- 코드 경로, 관련 문서/이슈
```

## 11) 체크리스트(기능별 공통)

- 플로우·상태 전이·권한이 모순 없이 정의되었는가?
- 중복 전송 방지/재시도/조용 시간 등 알림 정책이 명확한가?
- 스키마/마이그레이션 영향과 운영데이터 리스크가 검토되었는가?
- API 계약이 구체 예시(JSON)와 에러 코드를 포함하는가?
- 수용 기준이 사용자 관점 시나리오와 에지 케이스를 포괄하는가?
- 개인정보 처리/보안/접근성 요구사항을 포함했는가?
- 릴리스 전략/롤백/모니터링 항목이 준비되었는가?

---

참고: 프로젝트 개요와 기술 스택, API 엔드포인트는 `README.md`를 확인하세요. 스키마 작업은 `docs/00. Prisma 스키마 작업 주의사항.md`, 환경설정은 `docs/환경변수 설정 가이드.md`를 우선 참조하십시오.

